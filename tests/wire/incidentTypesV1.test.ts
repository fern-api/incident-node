// This file was auto-generated by Fern from our API Definition.

import { IncidentIOClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("IncidentTypesV1Client", () => {
    test("list", async () => {
        const server = mockServerPool.createServer();
        const client = new IncidentIOClient({ maxRetries: 0, environment: server.baseUrl });

        const rawResponseBody = {
            incident_types: [
                {
                    create_in_triage: "always",
                    created_at: "2021-08-17T13:28:57Z",
                    description: "Customer facing production outages",
                    id: "01FCNDV6P870EA6S7TK1DSYDG0",
                    is_default: false,
                    name: "Production Outage",
                    private_incidents_only: false,
                    updated_at: "2021-08-17T13:28:57Z",
                },
            ],
        };
        server.mockEndpoint().get("/v1/incident_types").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.incidentTypesV1.list();
        expect(response).toEqual({
            incident_types: [
                {
                    create_in_triage: "always",
                    created_at: "2021-08-17T13:28:57Z",
                    description: "Customer facing production outages",
                    id: "01FCNDV6P870EA6S7TK1DSYDG0",
                    is_default: false,
                    name: "Production Outage",
                    private_incidents_only: false,
                    updated_at: "2021-08-17T13:28:57Z",
                },
            ],
        });
    });

    test("show", async () => {
        const server = mockServerPool.createServer();
        const client = new IncidentIOClient({ maxRetries: 0, environment: server.baseUrl });

        const rawResponseBody = {
            incident_type: {
                create_in_triage: "always",
                created_at: "2021-08-17T13:28:57Z",
                description: "Customer facing production outages",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_default: false,
                name: "Production Outage",
                private_incidents_only: false,
                updated_at: "2021-08-17T13:28:57Z",
            },
        };
        server
            .mockEndpoint()
            .get("/v1/incident_types/01FCNDV6P870EA6S7TK1DSYDG0")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.incidentTypesV1.show({
            id: "01FCNDV6P870EA6S7TK1DSYDG0",
        });
        expect(response).toEqual({
            incident_type: {
                create_in_triage: "always",
                created_at: "2021-08-17T13:28:57Z",
                description: "Customer facing production outages",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_default: false,
                name: "Production Outage",
                private_incidents_only: false,
                updated_at: "2021-08-17T13:28:57Z",
            },
        });
    });
});
