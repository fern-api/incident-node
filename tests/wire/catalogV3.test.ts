// This file was auto-generated by Fern from our API Definition.

import { FernApiClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("CatalogV3Client", () => {
    test("listentries", async () => {
        const server = mockServerPool.createServer();
        const client = new FernApiClient({ maxRetries: 0, environment: server.baseUrl });

        const rawResponseBody = {
            catalog_entries: [
                {
                    aliases: ["lawrence@incident.io", "lawrence"],
                    archived_at: "2021-08-17T14:28:57Z",
                    attribute_values: {
                        abc123: {
                            array_value: [{ label: "Lawrence Jones", literal: "SEV123" }],
                            value: { label: "Lawrence Jones", literal: "SEV123" },
                        },
                    },
                    catalog_type_id: "01FCNDV6P870EA6S7TK1DSYDG0",
                    created_at: "2021-08-17T13:28:57Z",
                    external_id: "761722cd-d1d7-477b-ac7e-90f9e079dc33",
                    id: "01FCNDV6P870EA6S7TK1DSYDG0",
                    name: "Primary On-call",
                    rank: 3,
                    updated_at: "2021-08-17T13:28:57Z",
                },
            ],
            catalog_type: {
                annotations: { "incident.io/catalog-importer/id": "id-of-config" },
                categories: ["customer"],
                color: "yellow",
                created_at: "2021-08-17T13:28:57Z",
                description: "Represents Kubernetes clusters that we run inside of GKE.",
                dynamic_resource_parameter: "abc123",
                estimated_count: 7,
                icon: "alert",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_editable: false,
                last_synced_at: "2021-08-17T13:28:57Z",
                name: "Kubernetes Cluster",
                ranked: true,
                registry_type: "PagerDutyService",
                required_integrations: ["pager_duty"],
                schema: {
                    attributes: [
                        {
                            array: false,
                            backlink_attribute: "abc123",
                            id: "01GW2G3V0S59R238FAHPDS1R66",
                            mode: "",
                            name: "tier",
                            path: [{ attribute_id: "abc123", attribute_name: "abc123" }],
                            type: 'Custom["Service"]',
                        },
                    ],
                    version: 1,
                },
                source_repo_url: "https://github.com/my-company/incident-io-catalog",
                type_name: 'Custom["BackstageGroup"]',
                updated_at: "2021-08-17T13:28:57Z",
                use_name_as_identifier: true,
            },
            pagination_meta: { after: "01FCNDV6P870EA6S7TK1DSYDG0", page_size: 25, total_record_count: 238 },
        };
        server
            .mockEndpoint()
            .get("/v3/catalog_entries")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.catalogV3.listentries({
            catalog_type_id: "01FCNDV6P870EA6S7TK1DSYDG0",
            page_size: 25,
            after: "01FDAG4SAP5TYPT98WGR2N7W91",
            identifier: "abc123",
        });
        expect(response).toEqual({
            catalog_entries: [
                {
                    aliases: ["lawrence@incident.io", "lawrence"],
                    archived_at: "2021-08-17T14:28:57Z",
                    attribute_values: {
                        abc123: {
                            array_value: [
                                {
                                    label: "Lawrence Jones",
                                    literal: "SEV123",
                                },
                            ],
                            value: {
                                label: "Lawrence Jones",
                                literal: "SEV123",
                            },
                        },
                    },
                    catalog_type_id: "01FCNDV6P870EA6S7TK1DSYDG0",
                    created_at: "2021-08-17T13:28:57Z",
                    external_id: "761722cd-d1d7-477b-ac7e-90f9e079dc33",
                    id: "01FCNDV6P870EA6S7TK1DSYDG0",
                    name: "Primary On-call",
                    rank: 3,
                    updated_at: "2021-08-17T13:28:57Z",
                },
            ],
            catalog_type: {
                annotations: {
                    "incident.io/catalog-importer/id": "id-of-config",
                },
                categories: ["customer"],
                color: "yellow",
                created_at: "2021-08-17T13:28:57Z",
                description: "Represents Kubernetes clusters that we run inside of GKE.",
                dynamic_resource_parameter: "abc123",
                estimated_count: 7,
                icon: "alert",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_editable: false,
                last_synced_at: "2021-08-17T13:28:57Z",
                name: "Kubernetes Cluster",
                ranked: true,
                registry_type: "PagerDutyService",
                required_integrations: ["pager_duty"],
                schema: {
                    attributes: [
                        {
                            array: false,
                            backlink_attribute: "abc123",
                            id: "01GW2G3V0S59R238FAHPDS1R66",
                            mode: "",
                            name: "tier",
                            path: [
                                {
                                    attribute_id: "abc123",
                                    attribute_name: "abc123",
                                },
                            ],
                            type: 'Custom["Service"]',
                        },
                    ],
                    version: 1,
                },
                source_repo_url: "https://github.com/my-company/incident-io-catalog",
                type_name: 'Custom["BackstageGroup"]',
                updated_at: "2021-08-17T13:28:57Z",
                use_name_as_identifier: true,
            },
            pagination_meta: {
                after: "01FCNDV6P870EA6S7TK1DSYDG0",
                page_size: 25,
                total_record_count: 238,
            },
        });
    });

    test("createentry", async () => {
        const server = mockServerPool.createServer();
        const client = new FernApiClient({ maxRetries: 0, environment: server.baseUrl });
        const rawRequestBody = {
            aliases: ["lawrence@incident.io", "lawrence"],
            attribute_values: { abc123: { array_value: [{ literal: "SEV123" }], value: { literal: "SEV123" } } },
            catalog_type_id: "01FCNDV6P870EA6S7TK1DSYDG0",
            external_id: "761722cd-d1d7-477b-ac7e-90f9e079dc33",
            name: "Primary On-call",
            rank: 3,
        };
        const rawResponseBody = {
            catalog_entry: {
                aliases: ["lawrence@incident.io", "lawrence"],
                archived_at: "2021-08-17T14:28:57Z",
                attribute_values: {
                    abc123: {
                        array_value: [{ label: "Lawrence Jones", literal: "SEV123" }],
                        value: { label: "Lawrence Jones", literal: "SEV123" },
                    },
                },
                catalog_type_id: "01FCNDV6P870EA6S7TK1DSYDG0",
                created_at: "2021-08-17T13:28:57Z",
                external_id: "761722cd-d1d7-477b-ac7e-90f9e079dc33",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                name: "Primary On-call",
                rank: 3,
                updated_at: "2021-08-17T13:28:57Z",
            },
        };
        server
            .mockEndpoint()
            .post("/v3/catalog_entries")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.catalogV3.createentry({
            aliases: ["lawrence@incident.io", "lawrence"],
            attribute_values: {
                abc123: {
                    array_value: [
                        {
                            literal: "SEV123",
                        },
                    ],
                    value: {
                        literal: "SEV123",
                    },
                },
            },
            catalog_type_id: "01FCNDV6P870EA6S7TK1DSYDG0",
            external_id: "761722cd-d1d7-477b-ac7e-90f9e079dc33",
            name: "Primary On-call",
            rank: 3,
        });
        expect(response).toEqual({
            catalog_entry: {
                aliases: ["lawrence@incident.io", "lawrence"],
                archived_at: "2021-08-17T14:28:57Z",
                attribute_values: {
                    abc123: {
                        array_value: [
                            {
                                label: "Lawrence Jones",
                                literal: "SEV123",
                            },
                        ],
                        value: {
                            label: "Lawrence Jones",
                            literal: "SEV123",
                        },
                    },
                },
                catalog_type_id: "01FCNDV6P870EA6S7TK1DSYDG0",
                created_at: "2021-08-17T13:28:57Z",
                external_id: "761722cd-d1d7-477b-ac7e-90f9e079dc33",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                name: "Primary On-call",
                rank: 3,
                updated_at: "2021-08-17T13:28:57Z",
            },
        });
    });

    test("bulkupdateentries", async () => {
        const server = mockServerPool.createServer();
        const client = new FernApiClient({ maxRetries: 0, environment: server.baseUrl });
        const rawRequestBody = {
            catalog_type_id: "01GW2G3V0S59R238FAHPDS1R66",
            entries: [
                {
                    aliases: ["abc123"],
                    attribute_values: {
                        abc123: { array_value: [{ literal: "SEV123" }], value: { literal: "SEV123" } },
                    },
                    entry_id: "abc123",
                    external_id: "abc123",
                    name: "abc123",
                    rank: 1,
                },
                {
                    aliases: ["abc123"],
                    attribute_values: {
                        abc123: { array_value: [{ literal: "SEV123" }], value: { literal: "SEV123" } },
                    },
                    entry_id: "abc123",
                    external_id: "abc123",
                    name: "abc123",
                    rank: 1,
                },
            ],
            update_attributes: ["01GW2G3V0S59R238FAHPDS1R66", "01GW2G3V0S59R238FAHPDS1R67"],
        };

        server
            .mockEndpoint()
            .post("/v3/catalog_entries/actions/bulk_update")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.catalogV3.bulkupdateentries({
            catalog_type_id: "01GW2G3V0S59R238FAHPDS1R66",
            entries: [
                {
                    aliases: ["abc123"],
                    attribute_values: {
                        abc123: {
                            array_value: [
                                {
                                    literal: "SEV123",
                                },
                            ],
                            value: {
                                literal: "SEV123",
                            },
                        },
                    },
                    entry_id: "abc123",
                    external_id: "abc123",
                    name: "abc123",
                    rank: 1,
                },
                {
                    aliases: ["abc123"],
                    attribute_values: {
                        abc123: {
                            array_value: [
                                {
                                    literal: "SEV123",
                                },
                            ],
                            value: {
                                literal: "SEV123",
                            },
                        },
                    },
                    entry_id: "abc123",
                    external_id: "abc123",
                    name: "abc123",
                    rank: 1,
                },
            ],
            update_attributes: ["01GW2G3V0S59R238FAHPDS1R66", "01GW2G3V0S59R238FAHPDS1R67"],
        });
        expect(response).toEqual(undefined);
    });

    test("showentry", async () => {
        const server = mockServerPool.createServer();
        const client = new FernApiClient({ maxRetries: 0, environment: server.baseUrl });

        const rawResponseBody = {
            catalog_entry: {
                aliases: ["lawrence@incident.io", "lawrence"],
                archived_at: "2021-08-17T14:28:57Z",
                attribute_values: {
                    abc123: {
                        array_value: [{ label: "Lawrence Jones", literal: "SEV123" }],
                        value: { label: "Lawrence Jones", literal: "SEV123" },
                    },
                },
                catalog_type_id: "01FCNDV6P870EA6S7TK1DSYDG0",
                created_at: "2021-08-17T13:28:57Z",
                external_id: "761722cd-d1d7-477b-ac7e-90f9e079dc33",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                name: "Primary On-call",
                rank: 3,
                updated_at: "2021-08-17T13:28:57Z",
            },
            catalog_type: {
                annotations: { "incident.io/catalog-importer/id": "id-of-config" },
                categories: ["customer"],
                color: "yellow",
                created_at: "2021-08-17T13:28:57Z",
                description: "Represents Kubernetes clusters that we run inside of GKE.",
                dynamic_resource_parameter: "abc123",
                estimated_count: 7,
                icon: "alert",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_editable: false,
                last_synced_at: "2021-08-17T13:28:57Z",
                name: "Kubernetes Cluster",
                ranked: true,
                registry_type: "PagerDutyService",
                required_integrations: ["pager_duty"],
                schema: {
                    attributes: [
                        {
                            array: false,
                            backlink_attribute: "abc123",
                            id: "01GW2G3V0S59R238FAHPDS1R66",
                            mode: "",
                            name: "tier",
                            path: [{ attribute_id: "abc123", attribute_name: "abc123" }],
                            type: 'Custom["Service"]',
                        },
                    ],
                    version: 1,
                },
                source_repo_url: "https://github.com/my-company/incident-io-catalog",
                type_name: 'Custom["BackstageGroup"]',
                updated_at: "2021-08-17T13:28:57Z",
                use_name_as_identifier: true,
            },
        };
        server
            .mockEndpoint()
            .get("/v3/catalog_entries/01FCNDV6P870EA6S7TK1DSYDG0")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.catalogV3.showentry({
            id: "01FCNDV6P870EA6S7TK1DSYDG0",
        });
        expect(response).toEqual({
            catalog_entry: {
                aliases: ["lawrence@incident.io", "lawrence"],
                archived_at: "2021-08-17T14:28:57Z",
                attribute_values: {
                    abc123: {
                        array_value: [
                            {
                                label: "Lawrence Jones",
                                literal: "SEV123",
                            },
                        ],
                        value: {
                            label: "Lawrence Jones",
                            literal: "SEV123",
                        },
                    },
                },
                catalog_type_id: "01FCNDV6P870EA6S7TK1DSYDG0",
                created_at: "2021-08-17T13:28:57Z",
                external_id: "761722cd-d1d7-477b-ac7e-90f9e079dc33",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                name: "Primary On-call",
                rank: 3,
                updated_at: "2021-08-17T13:28:57Z",
            },
            catalog_type: {
                annotations: {
                    "incident.io/catalog-importer/id": "id-of-config",
                },
                categories: ["customer"],
                color: "yellow",
                created_at: "2021-08-17T13:28:57Z",
                description: "Represents Kubernetes clusters that we run inside of GKE.",
                dynamic_resource_parameter: "abc123",
                estimated_count: 7,
                icon: "alert",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_editable: false,
                last_synced_at: "2021-08-17T13:28:57Z",
                name: "Kubernetes Cluster",
                ranked: true,
                registry_type: "PagerDutyService",
                required_integrations: ["pager_duty"],
                schema: {
                    attributes: [
                        {
                            array: false,
                            backlink_attribute: "abc123",
                            id: "01GW2G3V0S59R238FAHPDS1R66",
                            mode: "",
                            name: "tier",
                            path: [
                                {
                                    attribute_id: "abc123",
                                    attribute_name: "abc123",
                                },
                            ],
                            type: 'Custom["Service"]',
                        },
                    ],
                    version: 1,
                },
                source_repo_url: "https://github.com/my-company/incident-io-catalog",
                type_name: 'Custom["BackstageGroup"]',
                updated_at: "2021-08-17T13:28:57Z",
                use_name_as_identifier: true,
            },
        });
    });

    test("updateentry", async () => {
        const server = mockServerPool.createServer();
        const client = new FernApiClient({ maxRetries: 0, environment: server.baseUrl });
        const rawRequestBody = {
            aliases: ["lawrence@incident.io", "lawrence"],
            attribute_values: { abc123: { array_value: [{ literal: "SEV123" }], value: { literal: "SEV123" } } },
            external_id: "761722cd-d1d7-477b-ac7e-90f9e079dc33",
            name: "Primary On-call",
            rank: 3,
            update_attributes: ["abc123"],
        };
        const rawResponseBody = {
            catalog_entry: {
                aliases: ["lawrence@incident.io", "lawrence"],
                archived_at: "2021-08-17T14:28:57Z",
                attribute_values: {
                    abc123: {
                        array_value: [{ label: "Lawrence Jones", literal: "SEV123" }],
                        value: { label: "Lawrence Jones", literal: "SEV123" },
                    },
                },
                catalog_type_id: "01FCNDV6P870EA6S7TK1DSYDG0",
                created_at: "2021-08-17T13:28:57Z",
                external_id: "761722cd-d1d7-477b-ac7e-90f9e079dc33",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                name: "Primary On-call",
                rank: 3,
                updated_at: "2021-08-17T13:28:57Z",
            },
            catalog_type: {
                annotations: { "incident.io/catalog-importer/id": "id-of-config" },
                categories: ["customer"],
                color: "yellow",
                created_at: "2021-08-17T13:28:57Z",
                description: "Represents Kubernetes clusters that we run inside of GKE.",
                dynamic_resource_parameter: "abc123",
                estimated_count: 7,
                icon: "alert",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_editable: false,
                last_synced_at: "2021-08-17T13:28:57Z",
                name: "Kubernetes Cluster",
                ranked: true,
                registry_type: "PagerDutyService",
                required_integrations: ["pager_duty"],
                schema: {
                    attributes: [
                        {
                            array: false,
                            backlink_attribute: "abc123",
                            id: "01GW2G3V0S59R238FAHPDS1R66",
                            mode: "",
                            name: "tier",
                            path: [{ attribute_id: "abc123", attribute_name: "abc123" }],
                            type: 'Custom["Service"]',
                        },
                    ],
                    version: 1,
                },
                source_repo_url: "https://github.com/my-company/incident-io-catalog",
                type_name: 'Custom["BackstageGroup"]',
                updated_at: "2021-08-17T13:28:57Z",
                use_name_as_identifier: true,
            },
        };
        server
            .mockEndpoint()
            .put("/v3/catalog_entries/01FCNDV6P870EA6S7TK1DSYDG0")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.catalogV3.updateentry({
            id: "01FCNDV6P870EA6S7TK1DSYDG0",
            aliases: ["lawrence@incident.io", "lawrence"],
            attribute_values: {
                abc123: {
                    array_value: [
                        {
                            literal: "SEV123",
                        },
                    ],
                    value: {
                        literal: "SEV123",
                    },
                },
            },
            external_id: "761722cd-d1d7-477b-ac7e-90f9e079dc33",
            name: "Primary On-call",
            rank: 3,
            update_attributes: ["abc123"],
        });
        expect(response).toEqual({
            catalog_entry: {
                aliases: ["lawrence@incident.io", "lawrence"],
                archived_at: "2021-08-17T14:28:57Z",
                attribute_values: {
                    abc123: {
                        array_value: [
                            {
                                label: "Lawrence Jones",
                                literal: "SEV123",
                            },
                        ],
                        value: {
                            label: "Lawrence Jones",
                            literal: "SEV123",
                        },
                    },
                },
                catalog_type_id: "01FCNDV6P870EA6S7TK1DSYDG0",
                created_at: "2021-08-17T13:28:57Z",
                external_id: "761722cd-d1d7-477b-ac7e-90f9e079dc33",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                name: "Primary On-call",
                rank: 3,
                updated_at: "2021-08-17T13:28:57Z",
            },
            catalog_type: {
                annotations: {
                    "incident.io/catalog-importer/id": "id-of-config",
                },
                categories: ["customer"],
                color: "yellow",
                created_at: "2021-08-17T13:28:57Z",
                description: "Represents Kubernetes clusters that we run inside of GKE.",
                dynamic_resource_parameter: "abc123",
                estimated_count: 7,
                icon: "alert",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_editable: false,
                last_synced_at: "2021-08-17T13:28:57Z",
                name: "Kubernetes Cluster",
                ranked: true,
                registry_type: "PagerDutyService",
                required_integrations: ["pager_duty"],
                schema: {
                    attributes: [
                        {
                            array: false,
                            backlink_attribute: "abc123",
                            id: "01GW2G3V0S59R238FAHPDS1R66",
                            mode: "",
                            name: "tier",
                            path: [
                                {
                                    attribute_id: "abc123",
                                    attribute_name: "abc123",
                                },
                            ],
                            type: 'Custom["Service"]',
                        },
                    ],
                    version: 1,
                },
                source_repo_url: "https://github.com/my-company/incident-io-catalog",
                type_name: 'Custom["BackstageGroup"]',
                updated_at: "2021-08-17T13:28:57Z",
                use_name_as_identifier: true,
            },
        });
    });

    test("destroyentry", async () => {
        const server = mockServerPool.createServer();
        const client = new FernApiClient({ maxRetries: 0, environment: server.baseUrl });

        server
            .mockEndpoint()
            .delete("/v3/catalog_entries/01FCNDV6P870EA6S7TK1DSYDG0")
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.catalogV3.destroyentry({
            id: "01FCNDV6P870EA6S7TK1DSYDG0",
        });
        expect(response).toEqual(undefined);
    });

    test("listresources", async () => {
        const server = mockServerPool.createServer();
        const client = new FernApiClient({ maxRetries: 0, environment: server.baseUrl });

        const rawResponseBody = {
            resources: [
                {
                    category: "custom",
                    description: "Boolean true or false value",
                    label: "GitHub Repository",
                    type: 'CatalogEntry["01GVGYJSD39FRKVDWACK9NDS4E"]',
                    value_docstring:
                        "Either the GraphQL node ID of the repository or a string of <owner>/<repo>, e.g. incident-io/website",
                },
            ],
        };
        server
            .mockEndpoint()
            .get("/v3/catalog_resources")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.catalogV3.listresources();
        expect(response).toEqual({
            resources: [
                {
                    category: "custom",
                    description: "Boolean true or false value",
                    label: "GitHub Repository",
                    type: 'CatalogEntry["01GVGYJSD39FRKVDWACK9NDS4E"]',
                    value_docstring:
                        "Either the GraphQL node ID of the repository or a string of <owner>/<repo>, e.g. incident-io/website",
                },
            ],
        });
    });

    test("listtypes", async () => {
        const server = mockServerPool.createServer();
        const client = new FernApiClient({ maxRetries: 0, environment: server.baseUrl });

        const rawResponseBody = {
            catalog_types: [
                {
                    annotations: { "incident.io/catalog-importer/id": "id-of-config" },
                    categories: ["customer"],
                    color: "yellow",
                    created_at: "2021-08-17T13:28:57Z",
                    description: "Represents Kubernetes clusters that we run inside of GKE.",
                    dynamic_resource_parameter: "abc123",
                    estimated_count: 7,
                    icon: "alert",
                    id: "01FCNDV6P870EA6S7TK1DSYDG0",
                    is_editable: false,
                    last_synced_at: "2021-08-17T13:28:57Z",
                    name: "Kubernetes Cluster",
                    ranked: true,
                    registry_type: "PagerDutyService",
                    required_integrations: ["pager_duty"],
                    schema: {
                        attributes: [
                            {
                                array: false,
                                backlink_attribute: "abc123",
                                id: "01GW2G3V0S59R238FAHPDS1R66",
                                mode: "",
                                name: "tier",
                                path: [{ attribute_id: "abc123", attribute_name: "abc123" }],
                                type: 'Custom["Service"]',
                            },
                        ],
                        version: 1,
                    },
                    source_repo_url: "https://github.com/my-company/incident-io-catalog",
                    type_name: 'Custom["BackstageGroup"]',
                    updated_at: "2021-08-17T13:28:57Z",
                    use_name_as_identifier: true,
                },
            ],
        };
        server.mockEndpoint().get("/v3/catalog_types").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.catalogV3.listtypes();
        expect(response).toEqual({
            catalog_types: [
                {
                    annotations: {
                        "incident.io/catalog-importer/id": "id-of-config",
                    },
                    categories: ["customer"],
                    color: "yellow",
                    created_at: "2021-08-17T13:28:57Z",
                    description: "Represents Kubernetes clusters that we run inside of GKE.",
                    dynamic_resource_parameter: "abc123",
                    estimated_count: 7,
                    icon: "alert",
                    id: "01FCNDV6P870EA6S7TK1DSYDG0",
                    is_editable: false,
                    last_synced_at: "2021-08-17T13:28:57Z",
                    name: "Kubernetes Cluster",
                    ranked: true,
                    registry_type: "PagerDutyService",
                    required_integrations: ["pager_duty"],
                    schema: {
                        attributes: [
                            {
                                array: false,
                                backlink_attribute: "abc123",
                                id: "01GW2G3V0S59R238FAHPDS1R66",
                                mode: "",
                                name: "tier",
                                path: [
                                    {
                                        attribute_id: "abc123",
                                        attribute_name: "abc123",
                                    },
                                ],
                                type: 'Custom["Service"]',
                            },
                        ],
                        version: 1,
                    },
                    source_repo_url: "https://github.com/my-company/incident-io-catalog",
                    type_name: 'Custom["BackstageGroup"]',
                    updated_at: "2021-08-17T13:28:57Z",
                    use_name_as_identifier: true,
                },
            ],
        });
    });

    test("createtype", async () => {
        const server = mockServerPool.createServer();
        const client = new FernApiClient({ maxRetries: 0, environment: server.baseUrl });
        const rawRequestBody = {
            annotations: { "incident.io/catalog-importer/id": "id-of-config" },
            categories: ["customer"],
            color: "yellow",
            description: "Represents Kubernetes clusters that we run inside of GKE.",
            icon: "alert",
            name: "Kubernetes Cluster",
            ranked: true,
            source_repo_url: "https://github.com/my-company/incident-io-catalog",
            type_name: 'Custom["BackstageGroup"]',
            use_name_as_identifier: true,
        };
        const rawResponseBody = {
            catalog_type: {
                annotations: { "incident.io/catalog-importer/id": "id-of-config" },
                categories: ["customer"],
                color: "yellow",
                created_at: "2021-08-17T13:28:57Z",
                description: "Represents Kubernetes clusters that we run inside of GKE.",
                dynamic_resource_parameter: "abc123",
                estimated_count: 7,
                icon: "alert",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_editable: false,
                last_synced_at: "2021-08-17T13:28:57Z",
                name: "Kubernetes Cluster",
                ranked: true,
                registry_type: "PagerDutyService",
                required_integrations: ["pager_duty"],
                schema: {
                    attributes: [
                        {
                            array: false,
                            backlink_attribute: "abc123",
                            id: "01GW2G3V0S59R238FAHPDS1R66",
                            mode: "",
                            name: "tier",
                            path: [{ attribute_id: "abc123", attribute_name: "abc123" }],
                            type: 'Custom["Service"]',
                        },
                    ],
                    version: 1,
                },
                source_repo_url: "https://github.com/my-company/incident-io-catalog",
                type_name: 'Custom["BackstageGroup"]',
                updated_at: "2021-08-17T13:28:57Z",
                use_name_as_identifier: true,
            },
        };
        server
            .mockEndpoint()
            .post("/v3/catalog_types")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.catalogV3.createtype({
            annotations: {
                "incident.io/catalog-importer/id": "id-of-config",
            },
            categories: ["customer"],
            color: "yellow",
            description: "Represents Kubernetes clusters that we run inside of GKE.",
            icon: "alert",
            name: "Kubernetes Cluster",
            ranked: true,
            source_repo_url: "https://github.com/my-company/incident-io-catalog",
            type_name: 'Custom["BackstageGroup"]',
            use_name_as_identifier: true,
        });
        expect(response).toEqual({
            catalog_type: {
                annotations: {
                    "incident.io/catalog-importer/id": "id-of-config",
                },
                categories: ["customer"],
                color: "yellow",
                created_at: "2021-08-17T13:28:57Z",
                description: "Represents Kubernetes clusters that we run inside of GKE.",
                dynamic_resource_parameter: "abc123",
                estimated_count: 7,
                icon: "alert",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_editable: false,
                last_synced_at: "2021-08-17T13:28:57Z",
                name: "Kubernetes Cluster",
                ranked: true,
                registry_type: "PagerDutyService",
                required_integrations: ["pager_duty"],
                schema: {
                    attributes: [
                        {
                            array: false,
                            backlink_attribute: "abc123",
                            id: "01GW2G3V0S59R238FAHPDS1R66",
                            mode: "",
                            name: "tier",
                            path: [
                                {
                                    attribute_id: "abc123",
                                    attribute_name: "abc123",
                                },
                            ],
                            type: 'Custom["Service"]',
                        },
                    ],
                    version: 1,
                },
                source_repo_url: "https://github.com/my-company/incident-io-catalog",
                type_name: 'Custom["BackstageGroup"]',
                updated_at: "2021-08-17T13:28:57Z",
                use_name_as_identifier: true,
            },
        });
    });

    test("showtype", async () => {
        const server = mockServerPool.createServer();
        const client = new FernApiClient({ maxRetries: 0, environment: server.baseUrl });

        const rawResponseBody = {
            catalog_type: {
                annotations: { "incident.io/catalog-importer/id": "id-of-config" },
                categories: ["customer"],
                color: "yellow",
                created_at: "2021-08-17T13:28:57Z",
                description: "Represents Kubernetes clusters that we run inside of GKE.",
                dynamic_resource_parameter: "abc123",
                estimated_count: 7,
                icon: "alert",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_editable: false,
                last_synced_at: "2021-08-17T13:28:57Z",
                name: "Kubernetes Cluster",
                ranked: true,
                registry_type: "PagerDutyService",
                required_integrations: ["pager_duty"],
                schema: {
                    attributes: [
                        {
                            array: false,
                            backlink_attribute: "abc123",
                            id: "01GW2G3V0S59R238FAHPDS1R66",
                            mode: "",
                            name: "tier",
                            path: [{ attribute_id: "abc123", attribute_name: "abc123" }],
                            type: 'Custom["Service"]',
                        },
                    ],
                    version: 1,
                },
                source_repo_url: "https://github.com/my-company/incident-io-catalog",
                type_name: 'Custom["BackstageGroup"]',
                updated_at: "2021-08-17T13:28:57Z",
                use_name_as_identifier: true,
            },
        };
        server
            .mockEndpoint()
            .get("/v3/catalog_types/01FCNDV6P870EA6S7TK1DSYDG0")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.catalogV3.showtype({
            id: "01FCNDV6P870EA6S7TK1DSYDG0",
        });
        expect(response).toEqual({
            catalog_type: {
                annotations: {
                    "incident.io/catalog-importer/id": "id-of-config",
                },
                categories: ["customer"],
                color: "yellow",
                created_at: "2021-08-17T13:28:57Z",
                description: "Represents Kubernetes clusters that we run inside of GKE.",
                dynamic_resource_parameter: "abc123",
                estimated_count: 7,
                icon: "alert",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_editable: false,
                last_synced_at: "2021-08-17T13:28:57Z",
                name: "Kubernetes Cluster",
                ranked: true,
                registry_type: "PagerDutyService",
                required_integrations: ["pager_duty"],
                schema: {
                    attributes: [
                        {
                            array: false,
                            backlink_attribute: "abc123",
                            id: "01GW2G3V0S59R238FAHPDS1R66",
                            mode: "",
                            name: "tier",
                            path: [
                                {
                                    attribute_id: "abc123",
                                    attribute_name: "abc123",
                                },
                            ],
                            type: 'Custom["Service"]',
                        },
                    ],
                    version: 1,
                },
                source_repo_url: "https://github.com/my-company/incident-io-catalog",
                type_name: 'Custom["BackstageGroup"]',
                updated_at: "2021-08-17T13:28:57Z",
                use_name_as_identifier: true,
            },
        });
    });

    test("updatetype", async () => {
        const server = mockServerPool.createServer();
        const client = new FernApiClient({ maxRetries: 0, environment: server.baseUrl });
        const rawRequestBody = {
            annotations: { "incident.io/catalog-importer/id": "id-of-config" },
            categories: ["customer"],
            color: "yellow",
            description: "Represents Kubernetes clusters that we run inside of GKE.",
            icon: "alert",
            name: "Kubernetes Cluster",
            ranked: true,
            source_repo_url: "https://github.com/my-company/incident-io-catalog",
            use_name_as_identifier: true,
        };
        const rawResponseBody = {
            catalog_type: {
                annotations: { "incident.io/catalog-importer/id": "id-of-config" },
                categories: ["customer"],
                color: "yellow",
                created_at: "2021-08-17T13:28:57Z",
                description: "Represents Kubernetes clusters that we run inside of GKE.",
                dynamic_resource_parameter: "abc123",
                estimated_count: 7,
                icon: "alert",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_editable: false,
                last_synced_at: "2021-08-17T13:28:57Z",
                name: "Kubernetes Cluster",
                ranked: true,
                registry_type: "PagerDutyService",
                required_integrations: ["pager_duty"],
                schema: {
                    attributes: [
                        {
                            array: false,
                            backlink_attribute: "abc123",
                            id: "01GW2G3V0S59R238FAHPDS1R66",
                            mode: "",
                            name: "tier",
                            path: [{ attribute_id: "abc123", attribute_name: "abc123" }],
                            type: 'Custom["Service"]',
                        },
                    ],
                    version: 1,
                },
                source_repo_url: "https://github.com/my-company/incident-io-catalog",
                type_name: 'Custom["BackstageGroup"]',
                updated_at: "2021-08-17T13:28:57Z",
                use_name_as_identifier: true,
            },
        };
        server
            .mockEndpoint()
            .put("/v3/catalog_types/01FCNDV6P870EA6S7TK1DSYDG0")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.catalogV3.updatetype({
            id: "01FCNDV6P870EA6S7TK1DSYDG0",
            annotations: {
                "incident.io/catalog-importer/id": "id-of-config",
            },
            categories: ["customer"],
            color: "yellow",
            description: "Represents Kubernetes clusters that we run inside of GKE.",
            icon: "alert",
            name: "Kubernetes Cluster",
            ranked: true,
            source_repo_url: "https://github.com/my-company/incident-io-catalog",
            use_name_as_identifier: true,
        });
        expect(response).toEqual({
            catalog_type: {
                annotations: {
                    "incident.io/catalog-importer/id": "id-of-config",
                },
                categories: ["customer"],
                color: "yellow",
                created_at: "2021-08-17T13:28:57Z",
                description: "Represents Kubernetes clusters that we run inside of GKE.",
                dynamic_resource_parameter: "abc123",
                estimated_count: 7,
                icon: "alert",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_editable: false,
                last_synced_at: "2021-08-17T13:28:57Z",
                name: "Kubernetes Cluster",
                ranked: true,
                registry_type: "PagerDutyService",
                required_integrations: ["pager_duty"],
                schema: {
                    attributes: [
                        {
                            array: false,
                            backlink_attribute: "abc123",
                            id: "01GW2G3V0S59R238FAHPDS1R66",
                            mode: "",
                            name: "tier",
                            path: [
                                {
                                    attribute_id: "abc123",
                                    attribute_name: "abc123",
                                },
                            ],
                            type: 'Custom["Service"]',
                        },
                    ],
                    version: 1,
                },
                source_repo_url: "https://github.com/my-company/incident-io-catalog",
                type_name: 'Custom["BackstageGroup"]',
                updated_at: "2021-08-17T13:28:57Z",
                use_name_as_identifier: true,
            },
        });
    });

    test("destroytype", async () => {
        const server = mockServerPool.createServer();
        const client = new FernApiClient({ maxRetries: 0, environment: server.baseUrl });

        server
            .mockEndpoint()
            .delete("/v3/catalog_types/01FCNDV6P870EA6S7TK1DSYDG0")
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.catalogV3.destroytype({
            id: "01FCNDV6P870EA6S7TK1DSYDG0",
        });
        expect(response).toEqual(undefined);
    });

    test("updatetypeschema", async () => {
        const server = mockServerPool.createServer();
        const client = new FernApiClient({ maxRetries: 0, environment: server.baseUrl });
        const rawRequestBody = {
            attributes: [
                {
                    array: false,
                    backlink_attribute: "abc123",
                    id: "01GW2G3V0S59R238FAHPDS1R66",
                    mode: "",
                    name: "tier",
                    path: [{ attribute_id: "abc123" }],
                    type: 'Custom["Service"]',
                },
            ],
            version: 1,
        };
        const rawResponseBody = {
            catalog_type: {
                annotations: { "incident.io/catalog-importer/id": "id-of-config" },
                categories: ["customer"],
                color: "yellow",
                created_at: "2021-08-17T13:28:57Z",
                description: "Represents Kubernetes clusters that we run inside of GKE.",
                dynamic_resource_parameter: "abc123",
                estimated_count: 7,
                icon: "alert",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_editable: false,
                last_synced_at: "2021-08-17T13:28:57Z",
                name: "Kubernetes Cluster",
                ranked: true,
                registry_type: "PagerDutyService",
                required_integrations: ["pager_duty"],
                schema: {
                    attributes: [
                        {
                            array: false,
                            backlink_attribute: "abc123",
                            id: "01GW2G3V0S59R238FAHPDS1R66",
                            mode: "",
                            name: "tier",
                            path: [{ attribute_id: "abc123", attribute_name: "abc123" }],
                            type: 'Custom["Service"]',
                        },
                    ],
                    version: 1,
                },
                source_repo_url: "https://github.com/my-company/incident-io-catalog",
                type_name: 'Custom["BackstageGroup"]',
                updated_at: "2021-08-17T13:28:57Z",
                use_name_as_identifier: true,
            },
        };
        server
            .mockEndpoint()
            .post("/v3/catalog_types/01FCNDV6P870EA6S7TK1DSYDG0/actions/update_schema")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.catalogV3.updatetypeschema({
            id: "01FCNDV6P870EA6S7TK1DSYDG0",
            attributes: [
                {
                    array: false,
                    backlink_attribute: "abc123",
                    id: "01GW2G3V0S59R238FAHPDS1R66",
                    mode: "",
                    name: "tier",
                    path: [
                        {
                            attribute_id: "abc123",
                        },
                    ],
                    type: 'Custom["Service"]',
                },
            ],
            version: 1,
        });
        expect(response).toEqual({
            catalog_type: {
                annotations: {
                    "incident.io/catalog-importer/id": "id-of-config",
                },
                categories: ["customer"],
                color: "yellow",
                created_at: "2021-08-17T13:28:57Z",
                description: "Represents Kubernetes clusters that we run inside of GKE.",
                dynamic_resource_parameter: "abc123",
                estimated_count: 7,
                icon: "alert",
                id: "01FCNDV6P870EA6S7TK1DSYDG0",
                is_editable: false,
                last_synced_at: "2021-08-17T13:28:57Z",
                name: "Kubernetes Cluster",
                ranked: true,
                registry_type: "PagerDutyService",
                required_integrations: ["pager_duty"],
                schema: {
                    attributes: [
                        {
                            array: false,
                            backlink_attribute: "abc123",
                            id: "01GW2G3V0S59R238FAHPDS1R66",
                            mode: "",
                            name: "tier",
                            path: [
                                {
                                    attribute_id: "abc123",
                                    attribute_name: "abc123",
                                },
                            ],
                            type: 'Custom["Service"]',
                        },
                    ],
                    version: 1,
                },
                source_repo_url: "https://github.com/my-company/incident-io-catalog",
                type_name: 'Custom["BackstageGroup"]',
                updated_at: "2021-08-17T13:28:57Z",
                use_name_as_identifier: true,
            },
        });
    });
});
